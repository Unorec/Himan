<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三溫暖管理系統</title>
    <style>
        /* 基礎樣式 */
        body {
            font-family: Arial, '微軟正黑體', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        .container {
            width: 95%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 登入表單樣式 */
        .login-form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: 100px auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }

        .btn:hover {
            background: #45a049;
        }

        /* 頁首樣式 */
        .header {
            background: #333;
            color: white;
            padding: 1rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }

        /* 選單樣式 */
        .nav-menu {
            background: #f8f9fa;
            padding: 10px;
            margin-top: 60px;
        }

        .nav-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 20px;
        }

        .nav-menu a {
            text-decoration: none;
            color: #333;
            padding: 5px 10px;
        }

        .nav-menu a:hover {
            background: #e9ecef;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- 登入頁面 -->
    <div class="login-form">
        <h2>三溫暖管理系統登入</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">帳號</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">密碼</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit" class="btn">登入</button>
        </form>
    </div>

    <!-- 主系統介面（登入後顯示） -->
    <div class="main-system" style="display: none;">
        <!-- 頁首 -->
        <header class="header">
            <h1>三溫暖管理系統</h1>
        </header>

        <!-- 導航選單 -->
        <nav class="nav-menu">
            <ul>
                <li><a href="#" onclick="showSection('entry')">入場登記</a></li>
                <li><a href="#" onclick="showSection('records')">入場記錄</a></li>
                <li><a href="#" onclick="showSection('reports')">報表查詢</a></li>
                <li><a href="#" onclick="showSection('settings')">系統設定</a></li>
                <li><a href="#" onclick="logout()">登出</a></li>
            </ul>
        </nav>
    </div>

    <script>
        // 登入表單處理
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // 這裡應該要加入實際的登入驗證邏輯
            if (username === 'admin' && password === 'password') {
                document.querySelector('.login-form').style.display = 'none';
                document.querySelector('.main-system').style.display = 'block';
            } else {
                alert('帳號或密碼錯誤！');
            }
        });

        // 顯示不同區段的函數
        function showSection(sectionId) {
            // 實作切換不同功能區段的邏輯
            console.log('Showing section:', sectionId);
        }

        // 登出函數
        function logout() {
            if (confirm('確定要登出嗎？')) {
                document.querySelector('.login-form').style.display = 'block';
                document.querySelector('.main-system').style.display = 'none';
            }
        }
    </script>
    <!-- 在 main-system div 內新增以下內容 -->
<div class="container">
    <!-- 入場登記區域 -->
    <div id="entrySection" class="section">
        <div class="card">
            <h2>入場登記</h2>
            <form id="entryForm" class="form-grid">
                <div class="form-row">
                    <div class="form-group">
                        <label for="lockerNumber">櫃位號碼</label>
                        <input type="text" id="lockerNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="paymentType">付款方式</label>
                        <select id="paymentType" onchange="togglePaymentFields()">
                            <option value="cash">現金</option>
                            <option value="ticket">票券</option>
                        </select>
                    </div>
                </div>

                <!-- 現金付款欄位 -->
                <div id="cashFields" class="form-row">
                    <div class="form-group">
                        <label for="amount">金額</label>
                        <input type="number" id="amount">
                    </div>
                </div>

                <!-- 票券付款欄位 -->
                <div id="ticketFields" class="form-row" style="display:none;">
                    <div class="form-group">
                        <label for="ticketType">票券類型</label>
                        <select id="ticketType">
                            <option value="weekday">平日券</option>
                            <option value="allday">暢遊券</option>
                            <option value="event">活動票券</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ticketNumber">票券編號</label>
                        <input type="text" id="ticketNumber">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="notes">備註</label>
                        <textarea id="notes"></textarea>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">新增入場記錄</button>
            </form>
        </div>
    </div>

    <!-- 入場記錄列表區域 -->
    <div id="recordsSection" class="section">
        <div class="card">
            <div class="card-header">
                <h2>入場記錄一覽</h2>
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="搜尋櫃位號碼...">
                    <select id="statusFilter">
                        <option value="">全部狀態</option>
                        <option value="active">使用中</option>
                        <option value="tempLeave">暫時外出</option>
                        <option value="nearEnd">即將到期</option>
                        <option value="ended">已結束</option>
                    </select>
                    <button class="btn btn-search">搜尋</button>
                </div>
            </div>

            <div class="table-responsive">
                <table id="recordsTable">
                    <thead>
                        <tr>
                            <th>櫃位號碼</th>
                            <th>付款資訊</th>
                            <th>入場時間</th>
                            <th>外出時間</th>
                            <th>返回時間</th>
                            <th>剩餘時間</th>
                            <th>狀態</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="recordsList">
                        <!-- 資料會由 JavaScript 動態產生 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- 新增樣式 -->
<style>
    /* 卡片樣式 */
    .card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 20px;
        margin-bottom: 20px;
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    /* 表單網格樣式 */
    .form-grid {
        display: grid;
        gap: 20px;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    /* 表格樣式 */
    .table-responsive {
        overflow-x: auto;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    th {
        background-color: #f8f9fa;
        font-weight: bold;
    }

    /* 搜尋欄位樣式 */
    .search-bar {
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .search-bar input,
    .search-bar select {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    /* 按鈕樣式 */
    .btn-search {
        background: #007bff;
        color: white;
    }

    .btn-action {
        padding: 5px 10px;
        margin: 0 5px;
        border-radius: 4px;
        border: none;
        cursor: pointer;
    }

    .btn-leave {
        background: #ffc107;
        color: black;
    }

    .btn-return {
        background: #28a745;
        color: white;
    }

    .btn-checkout {
        background: #dc3545;
        color: white;
    }

    /* 狀態標籤樣式 */
    .status-tag {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.9em;
    }

    .status-active {
        background: #28a745;
        color: white;
    }

    .status-leave {
        background: #ffc107;
        color: black;
    }

    .status-near-end {
        background: #dc3545;
        color: white;
    }

    .status-ended {
        background: #6c757d;
        color: white;
    }
</style>

<!-- 加入 JavaScript -->
<script>
    // 切換付款方式顯示欄位
    function togglePaymentFields() {
        const paymentType = document.getElementById('paymentType').value;
        document.getElementById('cashFields').style.display = 
            paymentType === 'cash' ? 'grid' : 'none';
        document.getElementById('ticketFields').style.display = 
            paymentType === 'ticket' ? 'grid' : 'none';
    }

    // 模擬資料
    const mockData = [
        {
            lockerNumber: "A001",
            paymentInfo: "現金 NT$600",
            entryTime: "2024-01-14 14:30",
            leaveTime: "",
            returnTime: "",
            timeLeft: "23:30",
            status: "active"
        },
        {
            lockerNumber: "A002",
            paymentInfo: "票券 #12345",
            entryTime: "2024-01-14 13:00",
            leaveTime: "2024-01-14 15:30",
            returnTime: "",
            timeLeft: "22:00",
            status: "leave"
        }
    ];

    // 更新記錄列表
    function updateRecordsList() {
        const tbody = document.getElementById('recordsList');
        tbody.innerHTML = mockData.map(record => `
            <tr>
                <td>${record.lockerNumber}</td>
                <td>${record.paymentInfo}</td>
                <td>${record.entryTime}</td>
                <td>${record.leaveTime}</td>
                <td>${record.returnTime}</td>
                <td>${record.timeLeft}</td>
                <td>
                    <span class="status-tag status-${record.status}">
                        ${getStatusText(record.status)}
                    </span>
                </td>
                <td>
                    ${getActionButtons(record)}
                </td>
            </tr>
        `).join('');
    }

    // 取得狀態文字
    function getStatusText(status) {
        const statusMap = {
            active: '使用中',
            leave: '暫時外出',
            nearEnd: '即將到期',
            ended: '已結束'
        };
        return statusMap[status] || status;
    }

    // 取得操作按鈕
    function getActionButtons(record) {
        if (record.status === 'active') {
            return `
                <button class="btn-action btn-leave" onclick="handleLeave('${record.lockerNumber}')">
                    暫時外出
                </button>
                <button class="btn-action btn-checkout" onclick="handleCheckout('${record.lockerNumber}')">
                    結帳離場
                </button>
            `;
        }
        if (record.status === 'leave') {
            return `
                <button class="btn-action btn-return" onclick="handleReturn('${record.lockerNumber}')">
                    返回
                </button>
            `;
        }
        return '';
    }

    // 初始化頁面
    document.addEventListener('DOMContentLoaded', function() {
        updateRecordsList();
    });

    // 處理表單提交
    document.getElementById('entryForm').addEventListener('submit', function(e) {
        e.preventDefault();
        // 這裡加入實際的表單處理邏輯
        alert('新增入場記錄成功！');
    });
</script>
</body>
</html>
